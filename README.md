### 실행

1. 유의사항

- 로컬 환경, 테스트 환경에서는 데이터베이스 synchronize가 동작합니다.
- .env를 .env.example에 있는 변수의 값을 채워서 세팅하세요.

2. 실행

```
docker-compose up --build
```

### 기타 (요구사항 구현 방향 및 생각 정리)

1. 로그 레벨 분리

- BaseException에서 로그 레벨을 분리하였으나, 모든 에러에 대해 알림처리가 필요한 것으로 보아 모든 에러를 error레벨로 설정했음. 필요 시 warn으로 나누고, warn은 임계치가 초과하면 알림을 발송하는 등 별도의 관리를 통해 확장 가능.
- 디버깅을 위해 로컬에서는 응답 포맷에도 에러에 대한 컨텍스트(stack, 요청 본문 등)를 반환함.

2. 유저 인가

- 요구 사항에 맞게, 최소화한 students 테이블에는 유저의 이름만 들어있으며 JWT 생성을 위해 이름만 넣으면 회원가입 및 Access Token을 반환하는 API가 구현되어 있음.

3. 에세이 평가

   3.1. 로그 적재 및 재시도 등

- action / status를 분리, action은 로그 row가 어떤 요청인지 (최초, 1회 재시도 배치, 수동), status는 성공 / 실패 여부등 진행 결과를 저장함.
- 예를 들어, 최초 평가 요청 시 INITIALIZE: PENDING이며, 평가 실패 성공에 따라 status만 바뀜.
- 배치 처리, 혹은 수동 재시도 시 action: {action}으로 status: FAIL인 것만 분기처리

  3.2. 평가와 영상 처리

- 영상 처리는, 부가적인 기능으로 실패 시 로그만 남기고, 평가 실패처리는 하지 않는다.
- 업로드된 원본 영상은 메시지 큐에 의한 재평가, 수동 재평가를 위해 삭제하지 않고 보존처리한다. (재평가 요구사항의 본문은 submission.id밖에 없으므로)
- 영상에 대한 테스트는, FFMPEG의 영상 왼쪽 절반을 잘라야한다는 요구사항 때문에, 과제에서 제공받은 movie_1.mp4를 test의 정적 파일로 사용하였음

4. 제출 결과 전체 조회

- 요구사항으로 미루어보아 JWT를 통해 학생 본인의 전체 결과를 조회하는 것이라 이해했음. (관리자 x)
  하지만 기능 요구사항에 studentId, studentName으로의 검색 / 정렬이 있어서, 맥락상 맞지 않다고 판단하여 제외하였음.

5. 사내 전파 알림

- Error 인터페이스를 확장해서 Warn, Error를 구분한 뒤, Warn은 임계치를 초과 시, Error은 즉시 알림을 남길 수 있게 구성하고
  Loki같은 로그 에이전트를 같이 사용하게 되면, 유연한 로그 관리를 위해 로그 전용 매니저 인터페이스를 두어 로그를 에러 인스턴스에 따라 동적으로 생성하고, 알림은 모니터링 인프라쪽에서 구성하는 편입니다.
- 현재 어디로 알림을 보내야한다. 라는 요구사항은 없어, 또 result: failed 상황은 컨텍스트 끝자락의 catchError에서 캐치가 가능하기 때문에 로그 인터셉터에서 알림처리를 구현하는 코드를 주석으로 남겨뒀습니다.
